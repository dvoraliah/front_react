{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport CustomButton from \"../../components/CustomButton\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { API, USER_TOKEN } from \"../../services/env\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar HomeScreen = function HomeScreen(_ref) {\n  var route = _ref.route;\n  var username = route.params.username;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      dataCategories = _useState2[0],\n      setDataCategories = _useState2[1];\n\n  var navigation = useNavigation();\n  var URI = API + \"categories\";\n\n  var goBackSignPress = function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            AsyncStorage.setItem('token', \"\");\n            AsyncStorage.setItem(\"user_id\", \"\");\n            navigation.navigate(\"SignIn\");\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var categorieOnPress = function categorieOnPress(name, slug, id) {\n    navigation.navigate(\"Categorie\", {\n      categorieName: name,\n      slug: slug,\n      categorieId: id\n    });\n  };\n\n  var getCategories = function _callee2() {\n    var token, response;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"token\"));\n\n          case 2:\n            token = _context2.sent;\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(axios({\n              method: \"get\",\n              url: URI,\n              headers: {\n                Authorization: \"Bearer \" + token\n              }\n            }).catch(function (error) {\n              console.log(error);\n            }).then(function (response) {\n              setDataCategories(response.data);\n            }));\n\n          case 5:\n            response = _context2.sent;\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    getCategories();\n  }, []);\n  return _jsxs(View, {\n    style: styles.root,\n    children: [_jsxs(Text, {\n      style: {\n        fontSize: 24,\n        alignContent: \"center\"\n      },\n      children: [\"Bienvenue \", username]\n    }), _jsx(CustomButton, {\n      onPress: goBackSignPress,\n      text: \"Déconnexion\"\n    }), _jsx(Text, {\n      style: {\n        fontSize: 20,\n        alignContent: \"center\"\n      },\n      children: \"Cat\\xE9gories\"\n    }), dataCategories.map(function (categorie) {\n      if (categorie.slug == \"resume\") {\n        return _jsx(CustomButton, {\n          onPress: function onPress() {\n            return categorieOnPress(categorie.name, categorie.slug, categorie.id);\n          },\n          text: categorie.name\n        }, categorie.slug.toString());\n      }\n    }), dataCategories.map(function (categorie) {\n      if (categorie.slug != \"resume\") {\n        return _jsx(CustomButton, {\n          onPress: function onPress() {\n            return categorieOnPress(categorie.name, categorie.slug, categorie.id);\n          },\n          text: categorie.name\n        }, categorie.slug.toString());\n      }\n    })]\n  });\n};\n\nexport default HomeScreen;\nvar styles = StyleSheet.create({\n  root: {\n    padding: 10\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","CustomButton","useNavigation","API","USER_TOKEN","axios","AsyncStorage","HomeScreen","route","username","params","dataCategories","setDataCategories","navigation","URI","goBackSignPress","setItem","navigate","categorieOnPress","name","slug","id","categorieName","categorieId","getCategories","getItem","token","method","url","headers","Authorization","catch","error","console","log","then","response","data","styles","root","fontSize","alignContent","map","categorie","toString","StyleSheet","create","padding"],"sources":["/Applications/MAMP/htdocs/Projet_Orgabud/authentication/src/screens/HomeScreen/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { StyleSheet, Text, View } from 'react-native'\nimport CustomButton from \"../../components/CustomButton\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { API, USER_TOKEN } from \"../../services/env\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\n\nconst HomeScreen = ({route }) => {\n  const { username } = route.params;\n\n  const [dataCategories, setDataCategories] = useState([]);\n  const navigation = useNavigation();\n  const URI = API + \"categories\"\n  const goBackSignPress = async () => {\n    AsyncStorage.setItem('token', \"\")\n    AsyncStorage.setItem(\"user_id\", \"\");\n    navigation.navigate(\"SignIn\")\n  };\n  const categorieOnPress = (name, slug, id) => {\n    navigation.navigate(\"Categorie\", {\n      categorieName: name, slug: slug, categorieId : id\n    });\n  }\n  \n  const getCategories = async() => {\n    const token = await AsyncStorage.getItem(\"token\");\n    \n    const response = await axios({\n      method: \"get\",\n      url: URI,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    }).catch(function (error) {\n      console.log(error);\n    }).then(function(response){\n      setDataCategories(response.data)\n    });\n    \n  }\n  \n  // getToken()\n  useEffect(() => {\n    getCategories()\n  }, [])\n  \n    return (\n      <View style={styles.root}>\n        <Text style={{ fontSize: 24, alignContent: \"center\" }}>\n          Bienvenue {username}\n\n        </Text>\n        <CustomButton onPress={goBackSignPress} text={\"Déconnexion\"} />\n        <Text style={{ fontSize: 20, alignContent: \"center\" }}>Catégories</Text>\n\n        {\n        dataCategories.map((categorie) => {\n          if(categorie.slug == \"resume\"){\n            return (\n              <CustomButton\n                key={categorie.slug.toString()}\n                onPress={() =>\n                  categorieOnPress(categorie.name, categorie.slug, categorie.id)\n                }\n                text={categorie.name}\n              />\n            );\n          }\n              \n        })}\n        {dataCategories.map((categorie) => {\n          if(categorie.slug != \"resume\"){\n            return (\n              <CustomButton\n                key={categorie.slug.toString()}\n                onPress={() =>\n                  categorieOnPress(categorie.name, categorie.slug, categorie.id)\n                }\n                text={categorie.name}\n              />\n            );\n          }\n              \n        })}\n      </View>\n    );\n}\n\nexport default HomeScreen\nconst styles = StyleSheet.create({\n  root: {\n    padding: 10,\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}