{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport CustomButton from \"../CustomButton\";\nimport { DataTable } from \"react-native-paper\";\nimport { USER_ID } from \"../../services/env\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar optionsPerPage = [2, 3, 4];\n\nvar CustomTable = function CustomTable(_ref) {\n  var budgets = _ref.budgets,\n      idCategorie = _ref.idCategorie;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      page = _useState2[0],\n      setPage = _useState2[1];\n\n  var _useState3 = useState(optionsPerPage[0]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      itemsPerPage = _useState4[0],\n      setItemsPerPage = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      user_id = _useState6[0],\n      setUserId = _useState6[1];\n\n  var navigation = useNavigation();\n  var totalSomme = 0;\n\n  var getUserId = function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.t0 = setUserId;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(USER_ID);\n\n          case 3:\n            _context.t1 = _context.sent;\n            (0, _context.t0)(_context.t1);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  getUserId();\n  budgets.map(function (budget) {\n    if (budget.field.field_category_id == idCategorie) {\n      totalSomme = parseFloat(totalSomme) + parseFloat(budget.value);\n    }\n  });\n\n  var onNewEntryPress = function _callee2() {\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.t0 = setUserId;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(USER_ID);\n\n          case 3:\n            _context2.t1 = _context2.sent;\n            (0, _context2.t0)(_context2.t1);\n            navigation.navigate(\"NewEntry\", {\n              user_id: user_id,\n              categorie_id: idCategorie\n            });\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var onDebitedPress = function _callee3(id, value) {\n    var token, URI, response;\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(USER_TOKEN);\n\n          case 2:\n            token = _context3.sent;\n            URI = API + \"budgets/\" + id;\n            _context3.next = 6;\n            return _regeneratorRuntime.awrap(axios({\n              method: \"post\",\n              url: URI,\n              headers: {\n                Authorization: \"Bearer \" + token\n              },\n              data: {\n                is_debited: value\n              }\n            }).then(function async(response) {\n              console.log(URI);\n              setFieldsList(response.data);\n            }));\n\n          case 6:\n            response = _context3.sent;\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    setPage(0);\n  }, [itemsPerPage]);\n  return _jsxs(DataTable, {\n    children: [_jsxs(DataTable.Header, {\n      children: [_jsx(DataTable.Title, {\n        children: \"Achat\"\n      }), _jsx(DataTable.Title, {\n        numeric: true,\n        children: \"Montant\"\n      }), _jsx(DataTable.Title, {\n        numeric: true,\n        children: \"D\\xE9bit\\xE9\"\n      }), _jsx(DataTable.Title, {\n        numeric: true,\n        children: \"Suppr\"\n      })]\n    }), budgets.map(function (budget) {\n      if (budget.field.field_category_id == idCategorie) {\n        return _jsx(_Fragment, {\n          children: _jsxs(DataTable.Row, {\n            children: [_jsx(DataTable.Cell, {\n              textStyle: styles.align,\n              children: _jsx(CustomButton, {\n                onPress: function onPress() {\n                  \"\";\n                },\n                text: budget.field.name,\n                type: \"CELL\"\n              })\n            }, budget.id + budget.field_id), _jsx(DataTable.Cell, {\n              numeric: true,\n              children: _jsx(CustomButton, {\n                onPress: function onPress() {\n                  console.warn(\"pouet\");\n                },\n                text: budget.value,\n                type: \"CELL\"\n              })\n            }, budget.id + budget.value), _jsx(DataTable.Cell, {\n              numeric: true,\n              children: _jsx(CustomButton, {\n                onPress: function onPress() {\n                  return onDebitedPress(budget.id, budget.is_debited == 1 ? 0 : 1);\n                },\n                text: budget.is_debited == 1 ? \"Oui\" : \"Non\",\n                type: \"CELL\"\n              })\n            }, budget.id + budget.is_debited), _jsx(DataTable.Cell, {\n              numeric: true,\n              children: _jsx(CustomButton, {\n                onPress: function onPress() {\n                  console.warn(\"pouet\");\n                },\n                text: \"X\"\n              })\n            }, budget.id + \" delete\")]\n          }, budget.id)\n        });\n      }\n    }), _jsxs(DataTable.Row, {\n      children: [_jsxs(DataTable.Cell, {\n        children: [\" \", \"Total des \", idCategorie == 1 ? \"Revenus\" : \"Depense\"]\n      }), _jsx(DataTable.Cell, {\n        numeric: true,\n        children: totalSomme\n      })]\n    }), _jsxs(DataTable.Row, {\n      children: [_jsx(DataTable.Cell, {\n        numeric: true\n      }), _jsx(DataTable.Cell, {\n        children: _jsx(CustomButton, {\n          onPress: onNewEntryPress,\n          text: \"Nouvelle entrée\"\n        })\n      }), _jsx(DataTable.Cell, {\n        numeric: true\n      })]\n    }), _jsx(DataTable.Pagination, {\n      page: page,\n      numberOfPages: 3,\n      onPageChange: function onPageChange(page) {\n        return setPage(page);\n      },\n      label: \"1-2 of 6\",\n      optionsPerPage: optionsPerPage,\n      itemsPerPage: itemsPerPage,\n      setItemsPerPage: setItemsPerPage,\n      showFastPagination: true,\n      optionsLabel: \"Rows per page\"\n    })]\n  });\n};\n\nexport default CustomTable;\nvar styles = StyleSheet.create({\n  container: {\n    alignItems: \"center\",\n    color: \"white\",\n    width: \"100%\",\n    borderColor: \"salmon\",\n    borderWidth: 1,\n    borderRadius: 5,\n    padding: 10,\n    marginVertical: 5\n  },\n  center_cell: {\n    color: \"black\",\n    fontStyle: \"italic\"\n  },\n  align: {\n    marginTop: 20,\n    height: '150%'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","CustomButton","DataTable","USER_ID","useNavigation","optionsPerPage","CustomTable","budgets","idCategorie","page","setPage","itemsPerPage","setItemsPerPage","user_id","setUserId","navigation","totalSomme","getUserId","map","budget","field","field_category_id","parseFloat","value","onNewEntryPress","navigate","categorie_id","onDebitedPress","id","USER_TOKEN","token","URI","API","axios","method","url","headers","Authorization","data","is_debited","then","async","response","console","log","setFieldsList","styles","align","name","field_id","warn","StyleSheet","create","container","alignItems","color","width","borderColor","borderWidth","borderRadius","padding","marginVertical","center_cell","fontStyle","marginTop","height"],"sources":["/Applications/MAMP/htdocs/Projet_Orgabud/authentication/src/components/CustomTable/CustomTable.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport { View, Text, TextInput, StyleSheet } from \"react-native\";\nimport CustomButton from \"../CustomButton\"\nimport { DataTable } from \"react-native-paper\";\nimport { USER_ID } from \"../../services/env\";\nimport { useNavigation } from \"@react-navigation/native\";\n\n\nconst optionsPerPage = [2, 3, 4];\n\nconst CustomTable = ({ budgets, idCategorie}) => {\n  \n  // console.log(idCategorie)\n  const [page, setPage] = useState(0);\n  const [itemsPerPage, setItemsPerPage] = useState(optionsPerPage[0]);\n  const [user_id, setUserId] = useState(\"\");\n  const navigation = useNavigation();\n  var totalSomme = 0;\n  const getUserId = async() => {\n    setUserId(await USER_ID);\n    // console.log(user_id);\n  }\n  getUserId();\n\n  budgets.map((budget) => {\n    if (budget.field.field_category_id == idCategorie) {\n      totalSomme = (parseFloat(totalSomme) + parseFloat(budget.value))\n    }\n  })\n  const onNewEntryPress = async () => {\n    setUserId(await USER_ID);\n    navigation.navigate(\"NewEntry\", {\n      user_id: user_id,\n      categorie_id: idCategorie,\n    });\n  };\n\n  const onDebitedPress = async (id, value) => {\n    // console.warn(id)\n    const token = await USER_TOKEN;\n    const URI = API + \"budgets/\" + id;\n    const response = await axios({\n      method: \"post\",\n      url: URI,\n      headers: {\n        Authorization: `Bearer ${token}`,\n        // Authorization: `Bearer 1|aIU9qWxRucCX07iauIygbsN24g1dhJjjdwduORhH`,\n      },\n      data:{\n        is_debited: value,\n      }\n    }).then(function async(response) {\n      console.log(URI);\n\n      setFieldsList(response.data);\n    });\n  }\n\n    \n\n  useEffect(() => {\n    \n    setPage(0);\n  }, [itemsPerPage]);\n\n  // console.log(user_id)\n  return (\n    <DataTable>\n      <DataTable.Header>\n        {/* <DataTable.Title>Date</DataTable.Title> */}\n        <DataTable.Title>Achat</DataTable.Title>\n\n        <DataTable.Title numeric>Montant</DataTable.Title>\n\n        <DataTable.Title numeric>Débité</DataTable.Title>\n\n        <DataTable.Title numeric>Suppr</DataTable.Title>\n      </DataTable.Header>\n\n      {budgets.map((budget) => {\n        if (budget.field.field_category_id == idCategorie) {\n          return (\n            <>\n              <DataTable.Row key={budget.id}>\n                <DataTable.Cell\n                  textStyle={styles.align}\n                  key={budget.id + budget.field_id}\n                >\n                  <CustomButton\n                    onPress={() => {\n                      \"\";\n                    }}\n                    text={budget.field.name}\n                    type={\"CELL\"}\n                  />\n                </DataTable.Cell>\n                <DataTable.Cell key={budget.id + budget.value} numeric>\n                  <CustomButton\n                    onPress={() => {\n                      console.warn(\"pouet\");\n                    }}\n                    text={budget.value}\n                    type={\"CELL\"}\n                  />\n                </DataTable.Cell>\n                <DataTable.Cell key={budget.id + budget.is_debited} numeric>\n                  <CustomButton\n                    onPress={() => onDebitedPress(budget.id, budget.is_debited == 1 ? 0 : 1)}\n                    text={budget.is_debited == 1 ? \"Oui\" : \"Non\"}\n                    type={\"CELL\"}\n                  />\n                </DataTable.Cell>\n                <DataTable.Cell key={budget.id + \" delete\"} numeric>\n                  <CustomButton\n                    onPress={() => {\n                      console.warn(\"pouet\");\n                    }}\n                    text={\"X\"}\n                    // type={\"CELL\"}\n                  />\n                </DataTable.Cell>\n              </DataTable.Row>\n            </>\n          );\n        }\n      })}\n      <DataTable.Row>\n        <DataTable.Cell>\n          {\" \"}\n          Total des {idCategorie == 1 ? \"Revenus\" : \"Depense\"}\n        </DataTable.Cell>\n    <DataTable.Cell numeric>{totalSomme}</DataTable.Cell>\n      </DataTable.Row>\n\n      <DataTable.Row>\n        <DataTable.Cell numeric></DataTable.Cell>\n        <DataTable.Cell>\n          <CustomButton onPress={onNewEntryPress} text={\"Nouvelle entrée\"} />\n        </DataTable.Cell>\n        <DataTable.Cell numeric></DataTable.Cell>\n      </DataTable.Row>\n\n      <DataTable.Pagination\n        page={page}\n        numberOfPages={3}\n        onPageChange={(page) => setPage(page)}\n        label=\"1-2 of 6\"\n        optionsPerPage={optionsPerPage}\n        itemsPerPage={itemsPerPage}\n        setItemsPerPage={setItemsPerPage}\n        showFastPagination\n        optionsLabel={\"Rows per page\"}\n      />\n    </DataTable>\n  );\n};\nexport default CustomTable;\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: \"center\",\n    color: \"white\",\n    width: \"100%\",\n    borderColor: \"salmon\",\n    borderWidth: 1,\n    borderRadius: 5,\n    padding: 10,\n    marginVertical: 5,\n  },\n  center_cell: {\n    color: \"black\",\n    fontStyle: \"italic\"\n  },\n  align: {\n    marginTop: 20,\n    height: '150%',\n  },\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}