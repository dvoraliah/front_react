{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport CustomButton from \"../../components/CustomButton\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { API } from \"../../services/env\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar HomeScreen = function HomeScreen() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      token = _useState2[0],\n      setToken = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      dataCategories = _useState4[0],\n      setDataCategories = _useState4[1];\n\n  var getToken = function _callee() {\n    var _token;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('token'));\n\n          case 3:\n            _token = _context.sent;\n            setToken(_token);\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            console.warn(_context.t0);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var navigation = useNavigation();\n  var URI = API + \"categories\";\n\n  var goBackSignPress = function goBackSignPress() {\n    navigation.navigate(\"SignIn\");\n  };\n\n  var getCategories = function _callee2() {\n    var response;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(axios({\n              method: \"get\",\n              url: URI,\n              headers: {\n                Authorization: \"Bearer \" + token\n              }\n            }).then(function (response) {\n              setDataCategories(response.data);\n              console.warn(response.data);\n            }));\n\n          case 2:\n            response = _context2.sent;\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  getToken();\n  useEffect(function () {\n    getCategories().then(function (res) {\n      return setDataCategories(res.data);\n    });\n  });\n  return _jsxs(View, {\n    style: styles.root,\n    children: [_jsx(Text, {\n      style: {\n        fontSize: 24,\n        alignContent: \"center\"\n      },\n      children: \"Accueil de l'utilisateur Authentifi\\xE9\"\n    }), _jsx(CustomButton, {\n      onPress: goBackSignPress,\n      text: \"Retourner à l'authentification \"\n    }), _jsx(CustomButton, {\n      onPress: function onPress() {\n        console.warn('pouet');\n      },\n      text: \"Catégorie\"\n    })]\n  });\n};\n\nexport default HomeScreen;\nvar styles = StyleSheet.create({\n  root: {\n    padding: 10,\n    backgroundColor: \"#f5b7b1\"\n  }\n});","map":{"version":3,"names":["React","useState","CustomButton","useNavigation","API","axios","AsyncStorage","HomeScreen","token","setToken","dataCategories","setDataCategories","getToken","getItem","console","warn","navigation","URI","goBackSignPress","navigate","getCategories","method","url","headers","Authorization","then","response","data","useEffect","res","styles","root","fontSize","alignContent","StyleSheet","create","padding","backgroundColor"],"sources":["/Applications/MAMP/htdocs/Projet_Orgabud/native/authentication/src/screens/HomeScreen/index.js"],"sourcesContent":["import React, { useState } from 'react'\nimport { StyleSheet, Text, View } from 'react-native'\nimport CustomButton from \"../../components/CustomButton\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { API } from \"../../services/env\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\n\n\n\nconst HomeScreen = () => {\n  const [token, setToken] = useState('');\n  const [dataCategories, setDataCategories] = useState([]);\n  // const [categories, setCategories] = useState([]);\n  const getToken= async() => {\n    try {\n      const token = await AsyncStorage.getItem('token')\n      setToken(token)\n    } catch (error) {\n      console.warn(error)\n    }\n  }\n  const navigation = useNavigation();\n  const URI = API + \"categories\"\n  const goBackSignPress = () => {\n    navigation.navigate(\"SignIn\");\n  };\n  const getCategories = async() => {\n    const response = await axios({\n      method: \"get\",\n      url: URI,\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    }).then((response) => {\n      //Si la response à la requête est acceptée par l'API, l'utilisateur est redirigé vers la page d'accueil.\n      // setCategories(response.data)\n      setDataCategories(response.data)\n      console.warn(response.data);\n      // response.status == 201 ? console.warn(\"pouet\") : console.warn(\"nope\");\n    });\n  }\n  \n  // getCategories()\n  getToken()\n  useEffect(() => {\n    getCategories().then(res=>setDataCategories(res.data))\n  })\n  \n    return (\n      <View style={styles.root}>\n        <Text style={{ fontSize: 24, alignContent: \"center\" }}>\n          Accueil de l'utilisateur Authentifié\n        </Text>\n        <CustomButton\n          onPress={goBackSignPress}\n          text={\"Retourner à l'authentification \"}\n        />\n        <CustomButton\n          onPress={()=> {\n            console.warn('pouet')\n          }}\n          text={\"Catégorie\"}\n        />\n      </View>\n    );\n}\n\nexport default HomeScreen\n\nconst styles = StyleSheet.create({\n  root: {\n    padding: 10,\n    backgroundColor: \"#f5b7b1\",\n  },\n});\n"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;;;;AAEA,OAAOC,YAAP;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,SAASC,GAAT;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,2CAAzB;;;;AAKA,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;EACvB,gBAA0BN,QAAQ,CAAC,EAAD,CAAlC;EAAA;EAAA,IAAOO,KAAP;EAAA,IAAcC,QAAd;;EACA,iBAA4CR,QAAQ,CAAC,EAAD,CAApD;EAAA;EAAA,IAAOS,cAAP;EAAA,IAAuBC,iBAAvB;;EAEA,IAAMC,QAAQ,GAAE;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA;YAAA,iCAEQN,YAAY,CAACO,OAAb,CAAqB,OAArB,CAFR;;UAAA;YAENL,MAFM;YAGZC,QAAQ,CAACD,MAAD,CAAR;YAHY;YAAA;;UAAA;YAAA;YAAA;YAKZM,OAAO,CAACC,IAAR;;UALY;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAhB;;EAQA,IAAMC,UAAU,GAAGb,aAAa,EAAhC;EACA,IAAMc,GAAG,GAAGb,GAAG,GAAG,YAAlB;;EACA,IAAMc,eAAe,GAAG,SAAlBA,eAAkB,GAAM;IAC5BF,UAAU,CAACG,QAAX,CAAoB,QAApB;EACD,CAFD;;EAGA,IAAMC,aAAa,GAAG;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,iCACGf,KAAK,CAAC;cAC3BgB,MAAM,EAAE,KADmB;cAE3BC,GAAG,EAAEL,GAFsB;cAG3BM,OAAO,EAAE;gBACPC,aAAa,cAAYhB;cADlB;YAHkB,CAAD,CAAL,CAMpBiB,IANoB,CAMf,UAACC,QAAD,EAAc;cAGpBf,iBAAiB,CAACe,QAAQ,CAACC,IAAV,CAAjB;cACAb,OAAO,CAACC,IAAR,CAAaW,QAAQ,CAACC,IAAtB;YAED,CAZsB,CADH;;UAAA;YACdD,QADc;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAtB;;EAiBAd,QAAQ;EACRgB,SAAS,CAAC,YAAM;IACdR,aAAa,GAAGK,IAAhB,CAAqB,UAAAI,GAAG;MAAA,OAAElB,iBAAiB,CAACkB,GAAG,CAACF,IAAL,CAAnB;IAAA,CAAxB;EACD,CAFQ,CAAT;EAIE,OACE,MAAC,IAAD;IAAM,KAAK,EAAEG,MAAM,CAACC,IAApB;IAAA,WACE,KAAC,IAAD;MAAM,KAAK,EAAE;QAAEC,QAAQ,EAAE,EAAZ;QAAgBC,YAAY,EAAE;MAA9B,CAAb;MAAA;IAAA,EADF,EAIE,KAAC,YAAD;MACE,OAAO,EAAEf,eADX;MAEE,IAAI,EAAE;IAFR,EAJF,EAQE,KAAC,YAAD;MACE,OAAO,EAAE,mBAAK;QACZJ,OAAO,CAACC,IAAR,CAAa,OAAb;MACD,CAHH;MAIE,IAAI,EAAE;IAJR,EARF;EAAA,EADF;AAiBH,CAxDD;;AA0DA,eAAeR,UAAf;AAEA,IAAMuB,MAAM,GAAGI,UAAU,CAACC,MAAX,CAAkB;EAC/BJ,IAAI,EAAE;IACJK,OAAO,EAAE,EADL;IAEJC,eAAe,EAAE;EAFb;AADyB,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}